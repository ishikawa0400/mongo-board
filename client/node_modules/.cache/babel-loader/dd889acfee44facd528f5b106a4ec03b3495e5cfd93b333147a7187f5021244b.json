{"ast":null,"code":"var _jsxFileName = \"/Users/yuuzab/dev/react_express/board/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [newPost, setNewPost] = useState('');\n  const [editingPost, setEditingPost] = useState(null);\n  const [editContent, setEditContent] = useState('');\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n  const fetchPosts = async () => {\n    try {\n      const res = await fetch('/api/posts');\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      const data = await res.json();\n      setPosts(data);\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n      alert(\"投稿の取得に失敗しました: \" + error.message);\n    }\n  };\n  const handlePostSubmit = async e => {\n    e.preventDefault();\n    try {\n      const res = await fetch('/api/posts', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          content: newPost\n        })\n      });\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      const newPostData = await res.json();\n      setPosts([...posts, newPostData]);\n      setNewPost('');\n    } catch (error) {\n      console.error(\"Error creating post:\", error);\n      alert(\"投稿の作成に失敗しました: \" + error.message);\n    }\n  };\n  const handleEditClick = post => {\n    setEditingPost(post);\n    setEditContent(post.content);\n  };\n  const handleEditSubmit = async (e, postId) => {\n    e.preventDefault();\n    try {\n      const res = await fetch(`/api/posts/${postId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          content: editContent\n        })\n      });\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      setPosts(posts.map(post => post._id === postId ? {\n        ...post,\n        content: editContent\n      } : post));\n      setEditingPost(null);\n      setEditContent('');\n    } catch (error) {\n      console.error(\"Error updating post:\", error);\n      alert(\"投稿の更新に失敗しました: \" + error.message);\n    }\n  };\n  const handleDeleteClick = async postId => {\n    try {\n      const res = await fetch(`/api/posts/${postId}`, {\n        method: 'DELETE'\n      });\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      setPosts(posts.filter(post => post._id !== postId));\n    } catch (error) {\n      console.error(\"Error deleting post:\", error);\n      alert(\"投稿の削除に失敗しました: \" + error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u63B2\\u793A\\u677F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handlePostSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: newPost,\n        onChange: e => setNewPost(e.target.value),\n        placeholder: \"\\u65B0\\u3057\\u3044\\u6295\\u7A3F\\u3092\\u5165\\u529B...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\u6295\\u7A3F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: posts.map(post => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"post-item\",\n        children: editingPost === post ? /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => handleEditSubmit(e, post._id),\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: editContent,\n            onChange: e => setEditContent(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"\\u4FDD\\u5B58\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => setEditingPost(null),\n            children: \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleEditClick(post),\n            children: \"\\u7DE8\\u96C6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDeleteClick(post._id),\n            children: \"\\u524A\\u9664\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }, this)\n      }, post._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"00VeXMcXBZvDx6jBKBXbXOWHvLA=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","App","_s","posts","setPosts","newPost","setNewPost","editingPost","setEditingPost","editContent","setEditContent","fetchPosts","res","fetch","ok","Error","status","data","json","error","console","alert","message","handlePostSubmit","e","preventDefault","method","headers","body","JSON","stringify","content","newPostData","handleEditClick","post","handleEditSubmit","postId","map","_id","handleDeleteClick","filter","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","placeholder","type","onClick","_c","$RefreshReg$"],"sources":["/Users/yuuzab/dev/react_express/board/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './index.css';\n\nfunction App() {\n  const [posts, setPosts] = useState([]);\n  const [newPost, setNewPost] = useState('');\n  const [editingPost, setEditingPost] = useState(null);\n  const [editContent, setEditContent] = useState('');\n\n\n  useEffect(() => {\n    fetchPosts();\n  }, []);\n\n  const fetchPosts = async () => {\n    try {\n      const res = await fetch('/api/posts');\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      const data = await res.json();\n      setPosts(data);\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n      alert(\"投稿の取得に失敗しました: \" + error.message);\n    }\n  };\n\n  const handlePostSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await fetch('/api/posts', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ content: newPost }),\n      });\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      const newPostData = await res.json();\n      setPosts([...posts, newPostData]);\n      setNewPost('');\n    } catch (error) {\n      console.error(\"Error creating post:\", error);\n      alert(\"投稿の作成に失敗しました: \" + error.message);\n    }\n  };\n\n\n  const handleEditClick = (post) => {\n    setEditingPost(post);\n    setEditContent(post.content);\n  };\n\n  const handleEditSubmit = async (e, postId) => {\n    e.preventDefault();\n    try {\n      const res = await fetch(`/api/posts/${postId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ content: editContent }),\n      });\n\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n\n      setPosts(posts.map(post => (post._id === postId ? { ...post, content: editContent } : post)));\n      setEditingPost(null);\n      setEditContent('');\n\n    } catch (error) {\n      console.error(\"Error updating post:\", error);\n      alert(\"投稿の更新に失敗しました: \" + error.message);\n    }\n  }\n\n  const handleDeleteClick = async (postId) => {\n    try {\n      const res = await fetch(`/api/posts/${postId}`, { method: 'DELETE' });\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      setPosts(posts.filter(post => post._id !== postId));\n    } catch (error) {\n      console.error(\"Error deleting post:\", error);\n      alert(\"投稿の削除に失敗しました: \" + error.message);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <h1>掲示板</h1>\n      <form onSubmit={handlePostSubmit}>\n        <textarea value={newPost} onChange={(e) => setNewPost(e.target.value)} placeholder=\"新しい投稿を入力...\" />\n        <button type=\"submit\">投稿</button>\n      </form>\n\n      <ul>\n        {posts.map(post => (\n          <li key={post._id} className=\"post-item\">\n            {editingPost === post ? (\n              <form onSubmit={(e) => handleEditSubmit(e, post._id)}>\n                <textarea value={editContent} onChange={(e) => setEditContent(e.target.value)} />\n                <button type=\"submit\">保存</button>\n                <button type=\"button\" onClick={() => setEditingPost(null)}>キャンセル</button>\n              </form>\n            ) : (\n              <div>\n                <p>{post.content}</p>\n                <button onClick={() => handleEditClick(post)}>編集</button>\n                <button onClick={() => handleDeleteClick(post._id)}>削除</button>\n              </div>\n            )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}